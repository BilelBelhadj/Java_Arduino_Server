<!-- HTML page dispplay latest data recieved from the ardino by the server -->
<!DOCTYPE html>
<html>
  <head>
    <title>Temperature Data</title>
    <!-- add style to the page -->
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f0f0f0;
      }
      h1 {
        text-align: center;
        color: #333;
      }
      #temperature {
        text-align: center;
        font-size: 2em;
        margin-top: 2em;
      }
      #humidite {
        text-align: center;
        font-size: 2em;
        margin-top: 2em;
      }
      #device {
        text-align: center;
        font-size: 2em;
        margin-top: 2em;
      }
    </style>

  </head>
  <body>
    <h1>Weather Data</h1>
    <p id="temperature"></p>
    <p id="humidite"></p>
    <p id="device"></p>

    <script>
      function getData() {
        var xhr = new XMLHttpRequest();   // Send a GET request to the server
        xhr.open("GET", "http://192.168.2.91:8080/temperature", true);  //specify the server ip adress with endpoint and port
        xhr.onload = function () {
          if (xhr.status === 200) {   //if the request is successfully recieved

            //decode the json variable
            console.log(xhr.responseText);
            var data = JSON.parse(xhr.responseText);
            document.getElementById("temperature").innerHTML =
              "Temperature: " + data.temperature + "Â°C";
            document.getElementById("humidite").innerHTML =
            "Humidite : " + data.humidite + "%";
            document.getElementById("device").innerHTML =
            "Device name : " + data.device;
          } else {
            console.log("Request failed.  Returned status of " + xhr.status);   //error message display
          }
        };
        xhr.send();   //close the connection
      }

      //cal the function every 10 seconds
      setInterval(getData, 10000);
    </script>
  </body>
</html>

